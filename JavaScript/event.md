# 이벤트

## 1. 이벤트 드리븐 프로그래밍

**브라우저는 처리해야 할 특정 사건이 발생하면 이를 감지하여 이벤트(event)를 발생(trigger)시킨다.** 예를 들어 클릭, 키보드 입력, 마우스 이동 등이 일어나면 브라우저는 이를 감지하여 특정한 타입의 이벤트를 발생시킨다.

<strong>이벤트 핸들러</strong>: 이벤트가 발생했을 때 호출될 함수

**이벤트 핸들러 등록**: 이벤트가 발생했을 때 브라우저에게 이벤트 핸들러의 호출을 위임하는 것

예를 들어 사용자가 버튼을 클릭하면 어떤 함수를 호출하고 싶다고 가정해보자. 이때 문제는 **언제 함수를 호출해야 하는가**이다. 사용자가 언제 버튼을 클릭할 지 알 수 없으므로 언제 함수를 호출해야 할지 알 수 없기 때문이다.

이때 브라우저는 사용자의 버튼 클릭을 감지하여 클릭 이벤트를 발생시킬 수 있다. 그리고 특정 버튼 요소에서 클릭 이벤트가 발생하면 특정 함수(이벤트 핸들러)를 호출하도록 브라우저에게 위임(이벤트 핸들러 등록)할 수 있다. 즉, 함수를 언제 호출할 지 알 수 없으므로 개발자가 명시적으로 함수를 호출하는 것이 아니라, **브라우저에게 함수 호출을 위임하는 것이다.**

```html
<!DOCTYPE html>
<html>
  <body>
    <button>Click me!</button>
    <script>
    	const $button = document.querySelector('button');
      
      // 사용자가 버튼을 클릭하면 함수를 호출하도록 요청
      $button.onclick = function () {
        console.log('button click');
      };
    </script>
  </body>
</html>
```

위 예제를 살펴보면 버튼 요소 `$button`의 `onclick` 프로퍼티에 함수를 할당하였다. 나중에 설명하겠지만 Window, Document, HTMLElement 타입의 객체는 `onclick`과 같이 이벤트에 대응하는 다양한 이벤트 핸들러 프로퍼티를 가지고 있다. **이벤트 핸들러 프로퍼티에 함수를 할당하면 해당 이벤트가 발생했을 때 할당한 함수가 브라우저에 의해 호출된다.**

이처럼 이벤트와 그에 대응하는 함수를 통해 사용자와 애플리케이션은 상호작용(Interaction)이 가능하게 된다. 이와 같이 프로그램의 흐름을 이벤트 중심으로 제어하는 프로그래밍 방식을 <strong>이벤트 드리븐 프로그래밍(event-driven programming)이라 한다.</strong>

&nbsp;  

## 2. 이벤트 타입

이벤트 타입(event type)은 **이벤트의 종류를 나타내는 문자열**이다. 예를 들어, 이벤트 타입 'click'은 사용자가 마우스 버튼을 클릭하였을 때 발생하는 이벤트를 나타낸다.

이벤트는 약 200여개의 종류가 있다. 이벤트에 대한 상세 목록은 [MDN의 Event reference](https://developer.mozilla.org/en-US/docs/Web/Events)에서 확인할 수 있다.

&nbsp;  

## 3. 이벤트 핸들러 등록

이벤트 핸들러(event handler/listener)는 이벤트가 발생했을 때 **브라우저에 호출을 위임한 함수**이다. 다시 말해, 이벤트가 발생하면 브라우저에 의해 호출될 함수가 이벤트 핸들러이다.

이벤트가 발생했을 때 브라우저에게 이벤트 핸들러의 호출을 위임하는 것을 **이벤트 핸들러 등록**이라 한다. 이벤트 핸들러를 등록하는 방법은 3가지이다.

* 이벤트 핸들러 어트리뷰트
* 이벤트 핸들러 프로퍼티
* `addEventListener` 메소드

&nbsp;  

### 3.1. 이벤트 핸들러 어트리뷰트

**HTML 요소의 어트리뷰트**에는 이벤트에 대응하는 이벤트 핸들러 어트리뷰트가 있다. 이벤트 핸들러 어트리뷰트는 onclick과 같이 on 접두사와 이벤트 타입으로 이루어져 있다. HTML 요소의 이벤트 핸들러 어트리뷰트 값으로 함수 호출문 등의 문(statement)을 할당하면 이벤트 핸들러가 등록된다.

```html
<!DOCTYPE html>
<html>
  <body>
    <button onclick="sayHi('Kim')">Click me!</button>
    <script>
    	function sayHi(name) {
        console.log(`Hi ${name}!`);
      }
    </script>
  </body>
</html>
```

주의할 것은 이벤트 핸들러 어트리뷰트 값으로 **함수 참조가 아닌 함수 호출문 등의 문을 할당한다는 것**이다.

이벤트 핸들러 등록이란, 함수 호출을 브라우저에게 위임하는 것이라 했다. 따라서 이벤트 핸들러를 등록할 때, 콜백 함수와 마찬가지로 **함수 참조**를 등록해야 브라우저가 등록된 함수, 즉 이벤트 핸들러를 호출할 수 있다. 만약 함수 참조가 아니라 함수 호출문을 등록하면 함수 호출문의 평가 결과가 이벤트 핸들러로 등록된다.

하지만 위 예제는 이벤트 핸들러 어트리뷰트 값으로 함수 호출문을 할당했다. 이때 **이벤트 핸들러 어트리뷰트 값은 사실 이벤트 핸들러의 함수 몸체를 의미한다.** 즉, `onclick="sayHi('Kim')"` 어트리뷰트는 파싱되어 아래와 같은 **함수를 생성하여 이벤트 핸들러 프로퍼티에 할당**한다.

```javascript
function onclick(event) {
  sayHi('Kim');
}
```

이처럼 동작하는 이유는 이벤트 핸들러 어트리뷰트 값으로 함수 참조를 할당하면 **이벤트 핸들러에 인수를 전달하기 곤란하기 때문이다.**

결국 **이벤트 핸들러 어트리뷰트 값으로 할당한 문자열은 암묵적으로 정의되는 이벤트 핸들러의 함수 몸체이다.** 따라서 이벤트 핸들러 어트리뷰트 값으로 아래와 같이 여러 개의 문을 할당할 수 있다.

```html
<button onclick="console.log('Hi! '); console.log('Kim');">Click me!</button>

<!--
암묵적으로 아래와 같은 함수(이벤트 핸들러)가 생성되어 이벤트 핸들러 프로퍼티에 할당한다.
function onclick(event) {
	console.log('Hi! ');
	console.log('Kim');
}
-->
```

이벤트 핸들러 어트리뷰트 방식은 오래된 코드에서 간혹 이 방식을 사용한 것이 있기 때문에 알아둘 필요는 있지만 더 이상 사용하지 않는 것이 좋다. HTML과 자바스크립트는 관심사가 다르므로 분리하는 것이 좋다.

단, **CBD**(Component Based Development) 방식의 Angular/React/Svelte/Vue.js와 같은 프레임워크/라이브러리에서는 이벤트 핸들러 어트리뷰트 방식으로 이벤트를 처리한다. CBD에서는 HTML, CSS, 자바스크립트 모두를 뷰(View)를 구성하기 위한 요소로 보기 때문에 관심사가 다르다고 생각하지 않는다.

&nbsp;  

### 3.2. 이벤트 핸들러 프로퍼티 방식































